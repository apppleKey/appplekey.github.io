<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .box{
            width: 1000px;
            height: 500px;
            background-color: pink;
            margin: 0 auto;
            position: relative;
        }
        .head{
            height: 10px;
            width: 10px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div class='box' id='box'>
    <div class="head" id="head">

    </div>

</div>
<script>
    var hd=document.getElementById("head");
    var dir="Arrowright";
    this.onkeyup=function (e) {
        dir=(e||window.event).key;
        console.log(dir);
    };
//    this.onkeyup=function (e) {
//
//       dir=(e||window.event).key;
//        console.log(dir);
//    }


   var h1=new head();

    function head() {

        this.x=0;
        this.y=0;
        this.curDir="ArrowRight";//蛇头当前的方向：右边
        this.ele=document.getElementById("head");
        this.timer;
        this.food;
        this.body=[];
        this.track=[[this.ele.style.left,this.ele.style.left]];//蛇的轨迹坐标存放
        this.body[0]=this.ele;
        this.eat=function () {
            var eb=this.body;
            var trail=document.createElement("div");
            trail.className="head";
            trail.style.backgroundColor="green";
//            trail.style.left=parseInt(eb[eb.length-1].style.left)-10+"px";
            box.appendChild(trail);
            eb.push(trail);
            this.track.push(this.track[this.track.length-1]);
        }
        this.dofood=function () {
            var e=this;
            this.food=document.createElement("div");
            this.food.className="head";
            this.food.style.backgroundColor="black";
//            this.food.style.left=parseInt(eb[eb.length-1].style.left)-10+"px";
            this.food.style.left=Math.round((Math.random()*98))*10+10+"px";
            this.food.style.top=Math.round((Math.random()*48))*10+10+"px";
//            his.food.style.top=0+"px";
            box.appendChild(this.food);


        }
        this.body.move=function () {
            var eb=this;

            function run() {
                eb[i].x=eb[i-1].x;
                eb[i].y=eb[i-1].y;
                eb[i].style.left=eb[i].x+"px";
                eb[i].style.top=eb[i].y+"px";
            }
            for(var i=1;i<eb.length;i++){
                run;
            }

        }

        this.move=function () {
            e=this;
            this.timer=setInterval(function () {

                        if (e.curDir != dir) {

                            e.curDir = dir;
                        }
                        switch (e.curDir) {
                            case "ArrowDown":
                                if (e.y < 490) {
                                    e.y += 10;
                                }
                                break;
                            case "ArrowRight":
                                if (e.x < 990) {
                                    e.x += 10;
                                }
                                break;
                            case "ArrowLeft":
                                if (e.x > 0) {
                                    e.x -= 10;
                                }
                                break;
                            case "ArrowUp":
                                if (e.y > 0) {
                                    e.y -= 10;
                                }
                                break;

                        }

                        e.ele.style.left = e.x + "px";
                        e.ele.style.top = e.y + "px";
                        e.track.unshift([e.ele.style.left,e.ele.style.top])
                        e.track.pop();
                    for(var i=1;i<e.body.length;i++) {
                        e.body[i].style.left=e.track[i][0];
                        e.body[i].style.top=e.track[i][1];
                    }
                    console.log(e.track[0][0]);

                    console.log(e.food.style.left);
                        if(e.track[0][0]==e.food.style.left&&e.track[0][1]==e.food.style.top){
                            console.log("wwwww");
                            console.log(e.body.length);
                            e.eat();
                            console.log(e.body.length);
                        box.removeChild(e.food);
                        e.dofood();

                        }


                    }
            ,100);
        }
        this.move();
        this.eat();
        this.eat();
        this.eat();
        this.eat();
        this.eat();
        this.dofood();

    }
</script>
</body>
</html>